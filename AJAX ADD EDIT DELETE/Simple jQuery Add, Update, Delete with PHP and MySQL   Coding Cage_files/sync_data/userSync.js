(function(){var h=window,j="//ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&SPug=true",g="PubMatic",c=(function(){try{return h.localStorage&&typeof h.localStorage.getItem==="function"&&typeof h.localStorage.setItem==="function"}catch(n){return false}})(),m=function(){},i=function(n,o,r){function s(){var A={};function B(){m("in afterEach, ",A);if(A.getConsentData&&A.getVendorConsents){n(A,r)}}return{consentDataCallback:function(C){m("in consentDataCallback, ",C);A.getConsentData=C;B()},vendorConsentsCallback:function(C){m("in vendorConsentsCallback, ",C);A.getVendorConsents=C;B()}}}function z(){m("calling CMP ");window.__cmp("getConsentData",null,p.consentDataCallback);window.__cmp("getVendorConsents",null,p.vendorConsentsCallback)}var p=s();var x={};if(window.__cmp){if(typeof window.__cmp==="function"){z()}else{m("calling CMP after delay");setTimeout(function(){if(typeof window.__cmp==="function"){z()}},500)}}else{if(window!==top){m("Tag is executing in iframe");if(t()&&typeof window.$sf.ext.cmp==="function"){m("In safe-frame CMP detection");y("getConsentData",p.consentDataCallback);y("getVendorConsents",p.vendorConsentsCallback)}else{m("In iframe CMP detection");var v=window;var u;while(!u){try{if(v.frames.__cmpLocator){u=v}}catch(w){}if(v===window.top){break}v=v.parent}q("getConsentData",u,p.consentDataCallback);q("getVendorConsents",u,p.vendorConsentsCallback)}}else{m("cmp might not have loaded, calling CMP after delay");setTimeout(function(){if(typeof window.__cmp==="function"){z()}},500)}}function t(){return !!(window.$sf&&window.$sf.ext)}function y(B,C){function A(F,E){if(F==="cmpReturn"){var D=(B==="getConsentData")?E.vendorConsentData:E.vendorConsents;C(D)}}window.$sf.ext.register(1,1,A);window.$sf.ext.cmp(B)}function q(C,F,E){window.__cmp=function(I,G,L){if(!F){D();var K="CMP not found";return o(K,r)}var H=Math.random()+"";var J={__cmpCall:{command:I,parameter:G,callId:H}};x[H]=L;F.postMessage(J,"*")};window.addEventListener("message",B,false);window.__cmp(C,null,A);function B(I){var H=(typeof I.data==="string"&&k(I.data,"cmpReturn"))?JSON.parse(I.data):I.data;if(H.__cmpReturn&&H.__cmpReturn.callId){var G=H.__cmpReturn;if(typeof x[G.callId]!=="undefined"){x[G.callId](G.returnValue,G.success);delete x[G.callId]}}}function D(){window.removeEventListener("message",B,false)}function A(G){D();E(G)}}},d=function(o){function p(q){m("Data received from CMP: ",q);if(q){if(q.getConsentData&&q.getConsentData.consentData){m("using getConsentData.consentData: ",q.getConsentData.consentData);a(o,"c",q.getConsentData.consentData)}else{if(q.getVendorConsents&&q.getVendorConsents.metadata){m("using getVendorConsents.metadata: ",q.getVendorConsents.metadata);a(o,"c",q.getVendorConsents.metadata)}}}}function n(){m(arguments);m("Failed to retrieve user consent data from CMP for pubId: ",o)}i(p,n)},a=function(q,n,p){var o;if(!c){m("local storage is not enabled");return}try{o=h.localStorage.getItem(g)}catch(r){m("failed in reading from LS")}if(o&&typeof o==="string"){try{o=JSON.parse(o)}catch(r){o={}}}else{o={}}m("data from ls",o);if(o){if(!o.hasOwnProperty(q)){o[q]={}}o[q].t=(new Date()).getTime();o[q][n]=p;if(n=="c"){o[q]["g"]=1}}try{h.localStorage.setItem(g,JSON.stringify(o));m("data stored in local storage successfuly")}catch(r){m("local storage reading exception")}},l=function(q){var p={c:""};if(!c){m("LS is not enabled");return p}var o;try{o=h.localStorage.getItem(g)}catch(r){m("failed in reading from LS")}if(o&&typeof o==="string"){try{o=JSON.parse(o)}catch(r){o={}}if(o.hasOwnProperty(q)){var n=o[q];if(n&&n.c&&n.t){if(n.t&&parseInt(n.t)>((new Date()).getTime()-(24*60*60*1000))){p.c=n.c}else{m("data in LS had no timestamp or expired timestamp.",n)}}}}return p},k=function(r,q){var o=0,n=r.length,p=false;for(;o<n;o++){if(r[o]===q){p=true;break}}return p};function b(o){var n=h.document.createElement("iframe");n.src=o;n.style.height="0px";n.style.width="0px";n.style.display="none";n.height=0;n.width=0;n.border="0px";n.hspace="0";n.vspace="0";n.marginWidth="0";n.marginHeight="0";n.style.border="0";n.scrolling="no";n.frameBorder="0";h.document.getElementsByTagName("script")[0].parentNode.appendChild(n)}function f(){return h.location.protocol!="https:"?"http:":"https:"}function e(o){var p="";for(var n in o){if(o.hasOwnProperty(n)){p+=n+"="+o[n]+"&"}}return p}h.PubMaticSync=h.PubMaticSync||{};h.PubMaticSync.sync=function(n){var o={};n.delay=n.delay||0;o.p=n.pubId||"";o.s=n.siteId||"";o.predirect=encodeURIComponent(n.url||"");o.userIdMacro=n.macro||"";setTimeout(function(){var p=h.__cmp?1:0;d(n.pubId);var q=l(n.pubId);p=(p?p:(n.gdpr?n.gdpr:0));o.gdpr_consent=q&&q.c?q.c:(n.gdprConsent||"");o.gdpr=o.gdpr_consent?1:(p||"0");b(f()+j+"&"+e(o))},n.delay)}})();